trigger:
  branches:
    include:
      - main

parameters:
  - name: browser
    displayName: Browser selection
    type: string
    default: 'chrome'
    values:
      - chrome
      - firefox
      - edge

jobs:
  - job: Test
    displayName: Run Tests
    pool:
      vmImage: 'ubuntu-latest'

    variables:
      - name: BROWSER
        value: ${{ parameters.browser }}
      - name: LT_USERNAME
        value: swapnilr
      - name: LT_ACCESS_KEY
        value: dhaSkMbveBHarx1CYczgPiYQwAaiE1fQTc2Td64LAxO4nQ4l5d

    steps:
      - script: |
          echo "Selected browser= ${BROWSER}"
          curl -O https://downloads.lambdatest.com/hyperexecute/linux/hyperexecute
          chmod u+x hyperexecute
          ./hyperexecute -u $(LT_USERNAME) -k $(LT_ACCESS_KEY) -i yaml/linux/nightwatch_hyperexecute_matrix_sample.yaml --vars "browser=$(BROWSER)"